# 푸시 알림 테스트 체크리스트

> **버전**: 1.0.0
> **작성일**: 2026-02-01
> **대상**: UNIQN Mobile (React Native + Expo)

---

## 📋 사전 준비

### 환경 확인

- [ ] EAS Build 완료 (Android APK)
- [ ] APK를 실제 Android 기기에 설치
- [ ] Firebase 콘솔 접근 가능
- [ ] Cloud Functions 배포 완료

### 테스트 계정

- [ ] 스태프(staff) 계정 준비
- [ ] 구인자(employer) 계정 준비
- [ ] 관리자(admin) 계정 (선택)

---

## 🔔 알림 권한 테스트

### 온보딩 화면

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 첫 로그인 시 온보딩 화면 표시 | 로그인 후 알림 권한 요청 화면 나타남 | ⬜ |
| "알림 허용하기" 버튼 동작 | 시스템 권한 팝업 표시 | ⬜ |
| "나중에 하기" 버튼 동작 | 온보딩 완료 처리, 메인 화면 이동 | ⬜ |
| 온보딩 후 다시 로그인 | 온보딩 화면 표시되지 않음 | ⬜ |
| 다크모드 UI | 온보딩 화면 다크모드 정상 표시 | ⬜ |

### 권한 상태

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 권한 허용 | 토큰 발급 및 Firestore 저장 확인 | ⬜ |
| 권한 거부 | 앱 정상 동작, 푸시 수신 안 됨 | ⬜ |
| 권한 거부 후 설정에서 허용 | 앱 재시작 시 토큰 등록 | ⬜ |

---

## 📱 FCM 토큰 테스트

### 토큰 발급

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 토큰 발급 확인 | Firestore users/{uid}/fcmTokens에 저장됨 | ⬜ |
| 토큰 고유성 | 같은 기기에서 동일 토큰 유지 | ⬜ |
| 다중 기기 토큰 | 다른 기기에서 로그인 시 토큰 추가 | ⬜ |

### 토큰 갱신

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 앱 재시작 후 토큰 확인 | 토큰 변경되지 않거나 갱신 처리됨 | ⬜ |
| 12시간 자동 갱신 | tokenRefreshService 동작 확인 | ⬜ |

### 토큰 해제

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 로그아웃 시 토큰 삭제 | Firestore에서 토큰 제거됨 | ⬜ |
| 계정 삭제 시 토큰 삭제 | 모든 토큰 제거됨 | ⬜ |

---

## 📨 알림 수신 테스트

### 포그라운드 (앱 사용 중)

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 토스트 표시 | 알림 수신 시 화면 상단 토스트 표시 | ⬜ |
| 토스트 터치 | 관련 화면으로 이동 | ⬜ |
| 알림 센터 추가 | Firestore notifications에 저장됨 | ⬜ |

### 백그라운드 (앱 최소화)

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 시스템 알림 표시 | Android 알림 영역에 표시됨 | ⬜ |
| 알림 터치 | 앱 열리며 관련 화면으로 이동 | ⬜ |
| 뱃지 증가 | 앱 아이콘 뱃지 수 증가 | ⬜ |

### 앱 종료 상태

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 시스템 알림 표시 | Android 알림 영역에 표시됨 | ⬜ |
| 알림 터치 | 앱 시작 후 관련 화면으로 이동 | ⬜ |

---

## 📬 알림 타입별 테스트

### 지원 관련 (Application)

| 타입 | 발신자 | 수신자 | 테스트 방법 | 결과 |
|------|--------|--------|------------|:----:|
| new_application | 스태프 | 구인자 | 공고에 지원하기 | ⬜ |
| application_confirmed | 구인자 | 스태프 | 지원 확정하기 | ⬜ |
| application_rejected | 구인자 | 스태프 | 지원 거절하기 | ⬜ |
| confirmation_cancelled | 구인자 | 스태프 | 확정 취소하기 | ⬜ |

### 출퇴근 관련 (Attendance)

| 타입 | 발신자 | 수신자 | 테스트 방법 | 결과 |
|------|--------|--------|------------|:----:|
| staff_checked_in | 스태프 | 구인자 | QR 출근 스캔 | ⬜ |
| staff_checked_out | 스태프 | 구인자 | QR 퇴근 스캔 | ⬜ |
| check_in_confirmed | 시스템 | 스태프 | 출근 완료 확인 | ⬜ |
| checkin_reminder | 시스템 | 스태프 | 근무 시작 30분 전 | ⬜ |

### 정산 관련 (Settlement)

| 타입 | 발신자 | 수신자 | 테스트 방법 | 결과 |
|------|--------|--------|------------|:----:|
| settlement_completed | 구인자 | 스태프 | 정산 완료 처리 | ⬜ |

### 공고 관련 (Job)

| 타입 | 발신자 | 수신자 | 테스트 방법 | 결과 |
|------|--------|--------|------------|:----:|
| job_updated | 구인자 | 확정된 스태프 | 공고 수정 | ⬜ |
| job_cancelled | 구인자 | 확정된 스태프 | 공고 취소 | ⬜ |
| job_closed | 시스템 | 구인자 | 공고 마감 | ⬜ |

### 시스템 (System)

| 타입 | 발신자 | 수신자 | 테스트 방법 | 결과 |
|------|--------|--------|------------|:----:|
| announcement | 관리자 | 전체 | 시스템 공지 발송 | ⬜ |

---

## 🔗 딥링크 테스트

### 알림에서 화면 이동

| 알림 타입 | 예상 이동 화면 | 결과 |
|----------|--------------|:----:|
| new_application | /employer/my-postings/{id}/applicants | ⬜ |
| application_confirmed | /app/schedule?date=... | ⬜ |
| settlement_completed | /app/settlements | ⬜ |
| staff_checked_in | /employer/my-postings/{id}/settlements | ⬜ |
| announcement | /app/notifications | ⬜ |

---

## ⚙️ 알림 설정 테스트

### 설정 화면

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 전체 알림 ON/OFF | 설정 변경 시 Firestore 저장 | ⬜ |
| 카테고리별 ON/OFF | 지원/스케줄/정산/공지 개별 설정 | ⬜ |
| 방해금지 시간 설정 | 시작/종료 시간 설정 | ⬜ |

### 설정 적용

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 전체 OFF 시 알림 안 옴 | 푸시 수신 안 됨 | ⬜ |
| 카테고리 OFF 시 해당 알림 안 옴 | 해당 타입 푸시 수신 안 됨 | ⬜ |
| 방해금지 시간 내 알림 안 옴 | 해당 시간대 푸시 수신 안 됨 | ⬜ |

---

## 📊 알림 센터 테스트

### 목록 조회

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 알림 목록 표시 | 최신순 정렬, 페이지네이션 | ⬜ |
| 읽지 않은 알림 표시 | 미읽음 알림 구분 (배경색) | ⬜ |
| 미읽음 카운트 | 탭 뱃지에 숫자 표시 | ⬜ |

### 알림 액션

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 알림 터치 | 읽음 처리 + 관련 화면 이동 | ⬜ |
| 모두 읽음 처리 | 전체 알림 읽음 처리 | ⬜ |
| 알림 삭제 | 스와이프 삭제, Optimistic Update | ⬜ |

### 오프라인 지원

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 오프라인 시 캐시 표시 | MMKV 캐시된 알림 표시 | ⬜ |
| 온라인 복귀 시 동기화 | 놓친 알림 가져오기 | ⬜ |

---

## 🐛 에러 케이스 테스트

### 토큰 관련

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 유효하지 않은 토큰 | Cloud Functions에서 자동 정리 | ⬜ |
| 토큰 발급 실패 | 앱 정상 동작, 에러 로깅 | ⬜ |

### 네트워크 관련

| 항목 | 테스트 내용 | 결과 |
|------|------------|:----:|
| 오프라인 중 알림 | 온라인 복귀 시 수신 | ⬜ |
| 알림 터치 시 오프라인 | 오프라인 배너 표시 | ⬜ |

---

## 📱 Android 채널 테스트

| 채널 ID | 용도 | 테스트 방법 | 결과 |
|---------|------|------------|:----:|
| default | 기본 알림 | 일반 알림 수신 | ⬜ |
| applications | 지원 관련 | 지원/확정 알림 | ⬜ |
| reminders | 출퇴근 리마인더 | 출근 알림 | ⬜ |
| settlement | 정산 | 정산 완료 알림 | ⬜ |
| announcements | 공지 | 시스템 공지 | ⬜ |

---

## ✅ 최종 확인

### 필수 통과 항목

- [ ] 온보딩 화면 정상 동작
- [ ] 권한 허용 시 토큰 등록
- [ ] 포그라운드/백그라운드 알림 수신
- [ ] 알림 터치 시 딥링크 이동
- [ ] 알림 센터 목록 표시
- [ ] 알림 읽음/삭제 동작

### 권장 통과 항목

- [ ] 다중 기기 토큰 관리
- [ ] 알림 설정 ON/OFF
- [ ] 오프라인 캐시 지원
- [ ] Android 채널별 알림

---

## 📝 테스트 결과 기록

**테스트 일자**: ____-__-__
**테스트 기기**: ________________
**Android 버전**: ________________
**앱 버전**: ________________

### 발견된 이슈

| # | 증상 | 재현 방법 | 심각도 | 상태 |
|---|------|----------|--------|------|
| 1 | | | | |
| 2 | | | | |
| 3 | | | | |

### 테스터 서명

- 테스터: ________________
- 승인자: ________________

---

*마지막 업데이트: 2026-02-01*
