# ëª¨ë°”ì¼ì•± ë°ì´í„° í”Œë¡œìš° & ì—°ê²° ê´€ê³„

> UNIQN Mobile Appì˜ í•µì‹¬ ì›Œí¬í”Œë¡œìš°ì™€ ë°ì´í„° ì—°ê²° ê´€ê³„ ë¬¸ì„œ

---

## 1. í•µì‹¬ ì›Œí¬í”Œë¡œìš° (5ë‹¨ê³„)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£ ì¸ì¦ í”Œë¡œìš°                                              â”‚
â”‚  ë¡œê·¸ì¸/íšŒì›ê°€ì… â†’ ë³¸ì¸ì¸ì¦(PASS/ì¹´ì¹´ì˜¤) â†’ í”„ë¡œí•„ ì™„ì„±        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£ êµ¬ì¸êµ¬ì§ í”Œë¡œìš° (ìŠ¤íƒœí”„)                                  â”‚
â”‚  ê³µê³  ê²€ìƒ‰/í•„í„° â†’ ìƒì„¸ ì¡°íšŒ â†’ ì§€ì›(Assignment v3.0) â†’ í™•ì •ëŒ€ê¸° â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£ ìŠ¤ì¼€ì¤„ & QR í”Œë¡œìš°                                       â”‚
â”‚  ë‚´ ìŠ¤ì¼€ì¤„ í™•ì¸ â†’ ë‹¹ì¼ QR ì¶œê·¼ â†’ ê·¼ë¬´ â†’ QR í‡´ê·¼ â†’ ì •ì‚° ëŒ€ê¸°   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£ êµ¬ì¸ì ê´€ë¦¬ í”Œë¡œìš°                                        â”‚
â”‚  ê³µê³  ìƒì„± â†’ ì§€ì›ì í™•ì¸ â†’ í™•ì •/ê±°ì ˆ/ëŒ€ê¸° â†’ ì¶œí‡´ê·¼ í™•ì¸ â†’ ì •ì‚° â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5ï¸âƒ£ ì•Œë¦¼ í”Œë¡œìš°                                               â”‚
â”‚  ì§€ì› ì•Œë¦¼ â†’ í™•ì •/ê±°ì ˆ ì•Œë¦¼ â†’ ê·¼ë¬´ ì „ë‚  ë¦¬ë§ˆì¸ë” â†’ ì •ì‚° ì™„ë£Œ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. ì „ì²´ ë°ì´í„° ì—°ê²° ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           1ï¸âƒ£ ì¸ì¦ í”Œë¡œìš°                                     â”‚
â”‚                                                                             â”‚
â”‚   [users]                                                                   â”‚
â”‚   â”œâ”€ uid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€ name                 â”‚                  â”‚                             â”‚
â”‚   â”œâ”€ role â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   â”œâ”€ identity.ci          â”‚                  â”‚                             â”‚
â”‚   â””â”€ fcmToken â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚                           â”‚                  â”‚                  â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚                  â”‚                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚                  â”‚
        â”‚                                      â”‚                  â”‚
        â–¼                                      â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       2ï¸âƒ£ êµ¬ì¸êµ¬ì§ í”Œë¡œìš°                                    â”‚
â”‚                                                                           â”‚
â”‚   [jobPostings]                      [applications]                       â”‚
â”‚   â”œâ”€ id â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”€ jobPostingId                      â”‚
â”‚   â”œâ”€ ownerId â—„â”€â”€â”€â”                   â”œâ”€ applicantId â—„â”€â”€â”€â”€ users.uid       â”‚
â”‚   â”œâ”€ postingType                     â”œâ”€ status                            â”‚
â”‚   â”œâ”€ dateSpecificRequirements[]      â”œâ”€ assignments[] (v3.0)              â”‚
â”‚   â”œâ”€ roles[]                         â”œâ”€ originalApplication               â”‚
â”‚   â”œâ”€ fixedConfig / tournamentConfig  â”œâ”€ confirmationHistory[]             â”‚
â”‚   â””â”€ status                          â”œâ”€ cancellationRequest               â”‚
â”‚         â”‚                            â””â”€ waitlistOrder                     â”‚
â”‚         â”‚                                    â”‚                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                                    â”‚
          â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚         â”‚
          â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       3ï¸âƒ£ ìŠ¤ì¼€ì¤„ & QR í”Œë¡œìš°                                 â”‚
â”‚                                                                           â”‚
â”‚   [workLogs]                              [eventQRCodes]                  â”‚
â”‚   â”œâ”€ applicationId â—„â”€â”€ applications.id    â”œâ”€ eventId (jobPostingId)       â”‚
â”‚   â”œâ”€ jobPostingId â—„â”€â”€â”€ jobPostings.id     â”œâ”€ generatedBy â—„â”€â”€ users.uid   â”‚
â”‚   â”œâ”€ staffId â—„â”€â”€â”€â”€â”€â”€â”€â”€ users.uid          â”œâ”€ action (checkIn/checkOut)    â”‚
â”‚   â”œâ”€ date                                 â”œâ”€ securityCode (UUID)          â”‚
â”‚   â”œâ”€ actualStartTime / actualEndTime      â”œâ”€ expiresAt (3ë¶„ ìœ íš¨)         â”‚
â”‚   â”œâ”€ settlementBreakdown (ìºì‹±)           â””â”€ isActive                     â”‚
â”‚   â””â”€ payrollStatus                                                        â”‚
â”‚         â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       4ï¸âƒ£ êµ¬ì¸ì ê´€ë¦¬ í”Œë¡œìš°                                  â”‚
â”‚                                                                           â”‚
â”‚   êµ¬ì¸ìê°€ ê´€ë¦¬í•˜ëŠ” ë°ì´í„°:                                                  â”‚
â”‚   â”œâ”€ jobPostings (ownerId = ìì‹ )                                         â”‚
â”‚   â”œâ”€ applications (í™•ì •/ê±°ì ˆ/ëŒ€ê¸°ì/ì·¨ì†Œìš”ì²­)                               â”‚
â”‚   â”œâ”€ workLogs (ì •ì‚° ì²˜ë¦¬, settlementBreakdown ì‚¬ìš©)                        â”‚
â”‚   â””â”€ eventQRCodes (QR ë°œê¸‰, 3ë¶„ ìœ íš¨, 2ë¶„ë§ˆë‹¤ ìë™ ê°±ì‹ )                    â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       5ï¸âƒ£ ì•Œë¦¼ í”Œë¡œìš°                                        â”‚
â”‚                                                                           â”‚
â”‚   [notifications]                                                         â”‚
â”‚   â”œâ”€ userId â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ users.uid                                       â”‚
â”‚   â”œâ”€ type (application_received, confirmed, rejected, reminder,           â”‚
â”‚   â”‚        settlement, cancellation_requested, waitlist_promoted)         â”‚
â”‚   â””â”€ data: {                                                              â”‚
â”‚        jobPostingId â—„â”€â”€â”€â”€ jobPostings.id                                  â”‚
â”‚        applicationId â—„â”€â”€â”€ applications.id                                 â”‚
â”‚        workLogId â—„â”€â”€â”€â”€â”€â”€â”€ workLogs.id                                     â”‚
â”‚      }                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. í•µì‹¬ ì—°ê²° í‚¤ (Foreign Keys)

| ì—°ê²° | From | To | ìš©ë„ |
|------|------|-----|------|
| **users.uid** | applications.applicantId | users | ì§€ì›ì ì •ë³´ ì¡°íšŒ |
| **users.uid** | workLogs.staffId | users | ê·¼ë¬´ì ì •ë³´ ì¡°íšŒ |
| **users.uid** | jobPostings.ownerId | users | ê³µê³  ì†Œìœ ì í™•ì¸ |
| **users.uid** | notifications.userId | users | ì•Œë¦¼ ëŒ€ìƒ |
| **users.uid** | eventQRCodes.generatedBy | users | QR ë°œê¸‰ì |
| **jobPostings.id** | applications.jobPostingId | jobPostings | ì§€ì›í•œ ê³µê³  |
| **jobPostings.id** | workLogs.jobPostingId | jobPostings | ê·¼ë¬´í•œ ê³µê³  |
| **jobPostings.id** | eventQRCodes.eventId | jobPostings | QR ëŒ€ìƒ ê³µê³  |
| **applications.id** | workLogs.applicationId | applications | í™•ì •ëœ ì§€ì›ì„œ |

---

## 4. í”Œë¡œìš°ë³„ ë°ì´í„° ì˜ì¡´ì„±

### 4.1 ì¸ì¦ â†’ êµ¬ì¸êµ¬ì§

```
users.uid â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ applications.applicantId
users.role â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ ê¶Œí•œ ì²´í¬ (employerë§Œ ê³µê³  ìƒì„± ê°€ëŠ¥)
users.name â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ applications.applicantName (ë³µì‚¬)
users.phone â”€â”€â”€â”€â”€â”€â”€â”€â†’ applications.applicantPhone (ë³µì‚¬)
```

### 4.2 êµ¬ì¸êµ¬ì§ â†’ ìŠ¤ì¼€ì¤„

```
applications.id â”€â”€â”€â”€â”€â”€â”€â”€â†’ workLogs.applicationId (í™•ì • ì‹œ ìƒì„±)
applications.assignments[] â†’ workLogs ë‹¤ì¤‘ ìƒì„± (ë‚ ì§œë³„, ì—­í• ë³„)
jobPostings.id â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ workLogs.jobPostingId
jobPostings.salaryInfo â”€â†’ workLogs.settlementBreakdown (ê³„ì‚° ê¸°ë°˜)
```

### 4.3 ìŠ¤ì¼€ì¤„ â†’ êµ¬ì¸ì

```
workLogs.actualStartTime â”€â”€â”€â†’ settlementBreakdown ê³„ì‚° (ìºì‹±)
workLogs.actualEndTime â”€â”€â”€â”€â”€â†’ settlementBreakdown ê³„ì‚° (ìºì‹±)
eventQRCodes.qrData â”€â”€â”€â”€â”€â”€â”€â”€â†’ workLogs ì¶œí‡´ê·¼ ì—…ë°ì´íŠ¸
eventQRCodes.securityCode â”€â”€â†’ QR ê²€ì¦
```

### 4.4 ì „ì²´ â†’ ì•Œë¦¼

```
applications.status ë³€ê²½ â”€â”€â”€â”€â”€â†’ notifications ìƒì„±
applications.cancellationRequest â†’ notifications ìƒì„± (ì·¨ì†Œ ìš”ì²­)
workLogs.payrollStatus â”€â”€â”€â”€â”€â”€â”€â†’ notifications ìƒì„± (ì •ì‚°ì™„ë£Œ)
users.fcmToken â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡
```

---

## 5. Assignment v3.0 êµ¬ì¡°

### 5.1 Assignment íƒ€ì… ì •ì˜

```typescript
interface Assignment {
  // v3.0: role/roles â†’ roleIds í†µí•©
  roleIds: string[];              // ë‹¨ì¼ ë° ë‹¤ì¤‘ ì—­í•  ë°°ì—´ë¡œ í†µì¼

  // ë‚ ì§œ/ì‹œê°„
  dates: string[];                // í•­ìƒ ë°°ì—´ (ì—°ì† ë‚ ì§œ ì§€ì›)
  timeSlot: string;               // "18:00-02:00" ë˜ëŠ” ë§ˆì»¤

  // ê·¸ë£¹í•‘ (ì—°ì† ë‚ ì§œ)
  isGrouped: boolean;
  groupId?: string;               // ì—°ì† ë‚ ì§œ ê·¸ë£¹ ì‹ë³„
  checkMethod?: 'group' | 'individual';  // ì¶œí‡´ê·¼ í™•ì¸ ë°©ì‹

  // ê¸°íƒ€
  requirementId?: string;         // dateSpecificRequirement ì°¸ì¡°
  duration?: DurationType;
  isTimeToBeAnnounced?: boolean;  // ì‹œê°„ ë¯¸ì •
  tentativeDescription?: string;
}

// ë§ˆì»¤ ìƒìˆ˜
const FIXED_DATE_MARKER = 'FIXED_SCHEDULE';   // ê³ ì •ê³µê³ ìš©
const FIXED_TIME_MARKER = 'NEGOTIABLE';        // í˜‘ì˜ ê°€ëŠ¥
const TBA_TIME_MARKER = 'ë¯¸ì •';                // ì‹œê°„ ë¯¸ì •
```

### 5.2 Assignment í—¬í¼ í•¨ìˆ˜

```typescript
// ì—­í•  ì¡°íšŒ
getAssignmentRole(assignment)  â†’ string      // ë‹¨ì¼ ì—­í• 
getAssignmentRoles(assignment) â†’ string[]    // ëª¨ë“  ì—­í• 

// ìƒì„± í—¬í¼
createSimpleAssignment(roleId, date, timeSlot)
createGroupedAssignment(roleIds, dates, timeSlot, groupId)
createMultiRoleAssignment(roleIds, date, timeSlot)

// ê²€ì¦
isValidAssignment(assignment) â†’ boolean      // íƒ€ì… ê°€ë“œ
```

---

## 6. PostingType ì‹œìŠ¤í…œ

### 6.1 4ê°€ì§€ ê³µê³  íƒ€ì…

| íƒ€ì… | ì„¤ëª… | ì¶”ê°€ ì„¤ì • |
|------|------|----------|
| `regular` | ì¼ë°˜ ê³µê³  | `dateSpecificRequirements[]` |
| `fixed` | ê³ ì •/ê¸°ê°„ì œ ê³µê³  | `fixedConfig`, `workSchedule` |
| `tournament` | ëŒ€íšŒ ê³µê³  | `tournamentConfig` (ê´€ë¦¬ì ìŠ¹ì¸ í•„ìš”) |
| `urgent` | ê¸´ê¸‰ ê³µê³  | ìš°ì„  ë…¸ì¶œ, `isUrgent: true` |

### 6.2 Fixed ê³µê³  ì„¤ì •

```typescript
interface FixedConfig {
  startDate: string;              // ê³„ì•½ ì‹œì‘ì¼
  endDate: string;                // ê³„ì•½ ì¢…ë£Œì¼
}

interface WorkSchedule {
  days: string[];                 // ['ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ']
  startTime: string;              // "09:00"
  endTime: string;                // "18:00"
}

// ì¶”ê°€ í•„ë“œ
daysPerWeek?: number;             // 0 = í˜‘ì˜, 1-7 = ê³ ì • ì¼ìˆ˜
isStartTimeNegotiable?: boolean;  // ì‹œì‘ì‹œê°„ í˜‘ì˜ ê°€ëŠ¥
```

### 6.3 Tournament ê³µê³  ì„¤ì •

```typescript
interface TournamentConfig {
  requiresApproval: boolean;      // ê´€ë¦¬ì ìŠ¹ì¸ í•„ìš”
  approvedBy?: string;            // ìŠ¹ì¸ì ID
  approvedAt?: Timestamp;
}
```

---

## 7. ì·¨ì†Œ ìš”ì²­ ì‹œìŠ¤í…œ (Cancellation Request)

### 7.1 ì·¨ì†Œ ìš”ì²­ êµ¬ì¡°

```typescript
interface CancellationRequest {
  requestedAt: string;            // ìš”ì²­ ì‹œê°„
  reason: string;                 // ì·¨ì†Œ ì‚¬ìœ 
  status: 'pending' | 'approved' | 'rejected';
  reviewedAt?: string;            // ê²€í†  ì‹œê°„
  reviewedBy?: string;            // ê²€í† ì ID
  rejectionReason?: string;       // ê±°ì ˆ ì‚¬ìœ 
}

// ApplicationStatusì— ì¶”ê°€ëœ ìƒíƒœ
type ApplicationStatus =
  | 'applied'
  | 'pending'
  | 'confirmed'
  | 'rejected'
  | 'cancelled'
  | 'waitlisted'
  | 'completed'
  | 'cancellation_pending';       // ì·¨ì†Œ ìš”ì²­ ëŒ€ê¸°ì¤‘
```

### 7.2 ì·¨ì†Œ ìš”ì²­ í”Œë¡œìš°

```
[ìŠ¤íƒœí”„]                           [êµ¬ì¸ì]
    â”‚                                 â”‚
    â”‚  í™•ì •ëœ ìƒíƒœì—ì„œ                 â”‚
    â”‚  ì·¨ì†Œ ìš”ì²­ ìƒì„±                  â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
    â”‚                                 â”‚
    â”‚  status: 'cancellation_pending' â”‚
    â”‚  cancellationRequest.status:    â”‚
    â”‚    'pending'                    â”‚
    â”‚                                 â”‚
    â”‚                      ê²€í†  í›„    â”‚
    â”‚                   ìŠ¹ì¸ ë˜ëŠ” ê±°ì ˆ â”‚
    â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                 â”‚
    â”‚  ìŠ¹ì¸ ì‹œ:                        â”‚
    â”‚    status: 'cancelled'          â”‚
    â”‚    filledPositions -= 1         â”‚
    â”‚    workLogs ì‚­ì œ                â”‚
    â”‚                                 â”‚
    â”‚  ê±°ì ˆ ì‹œ:                        â”‚
    â”‚    status: 'confirmed' (ìœ ì§€)   â”‚
    â”‚    cancellationRequest.status:  â”‚
    â”‚      'rejected'                 â”‚
```

### 7.3 ê´€ë ¨ í•¨ìˆ˜

```typescript
// applicationService.ts
requestCancellation(input: RequestCancellationInput, applicantId: string)

// applicantManagementService.ts
reviewCancellationRequest(input: ReviewCancellationInput, reviewerId: string)
getCancellationRequests(jobPostingId: string, ownerId: string)
```

---

## 8. ëŒ€ê¸°ì ê´€ë¦¬ ì‹œìŠ¤í…œ (Waitlist)

### 8.1 ëŒ€ê¸°ì í•„ë“œ

```typescript
interface Application {
  // ê¸°ì¡´ í•„ë“œ...

  // ëŒ€ê¸°ì ê´€ë ¨
  waitlistOrder?: number;         // ëŒ€ê¸° ìˆœë²ˆ (1ë¶€í„° ì‹œì‘)
  waitlistPromotedAt?: Timestamp; // ìŠ¹ê²© ì‹œê°„
}
```

### 8.2 ëŒ€ê¸°ì í”Œë¡œìš°

```
[ì§€ì›ì ê³¼ë‹¤ ìƒí™©]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì •ì› ì´ˆê³¼ ì‹œ                        â”‚
â”‚  â†’ addToWaitlist() í˜¸ì¶œ             â”‚
â”‚  â†’ status: 'waitlisted'             â”‚
â”‚  â†’ waitlistOrder ìë™ ê³„ì‚°          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì •ì› í™•ë³´ ì‹œ (ì·¨ì†Œ/ê±°ì ˆ ë°œìƒ)       â”‚
â”‚  â†’ promoteFromWaitlist() í˜¸ì¶œ       â”‚
â”‚  â†’ ëŒ€ê¸° ìˆœë²ˆ 1ë²ˆ ìë™ ìŠ¹ê²©           â”‚
â”‚  â†’ status: 'confirmed'              â”‚
â”‚  â†’ workLogs ìë™ ìƒì„±               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3 ê´€ë ¨ í•¨ìˆ˜

```typescript
// applicantManagementService.ts
addToWaitlist(applicationId: string, ownerId: string): Promise<void>
promoteFromWaitlist(applicationId: string, ownerId: string): Promise<ConfirmResult>
```

---

## 9. í™•ì •/ì·¨ì†Œ ì´ë ¥ ì¶”ì  (Audit Trail)

### 9.1 ì´ë ¥ êµ¬ì¡°

```typescript
interface Application {
  // ê¸°ì¡´ í•„ë“œ...

  // ìµœì´ˆ ì§€ì› ë°ì´í„° ë³´ì¡´ (í™•ì • ì‹œì ì— ì €ì¥)
  originalApplication?: {
    assignments: Assignment[];
    appliedAt: Timestamp;
  };

  // í™•ì •/ì·¨ì†Œ ì´ë ¥ (ê°ì‚¬ ì¶”ì )
  confirmationHistory?: ConfirmationHistoryEntry[];
}

interface ConfirmationHistoryEntry {
  confirmedAt: Timestamp;
  cancelledAt?: Timestamp;
  cancelReason?: string;
  assignments: Assignment[];      // í•´ë‹¹ ì‹œì ì˜ í™•ì •ëœ ê³¼ì œ
  confirmedBy?: string;           // í™•ì •ì ID
  cancelledBy?: string;           // ì·¨ì†Œì ID
}
```

### 9.2 ì´ë ¥ ê´€ë¦¬ ëª©ì 

| ìš©ë„ | ì„¤ëª… |
|------|------|
| **ì›ë³¸ ë³µêµ¬** | ìµœì´ˆ ì§€ì› ìƒíƒœë¡œ ë³µêµ¬ ê°€ëŠ¥ |
| **ë³€ê²½ ì¶”ì ** | ëˆ„ê°€, ì–¸ì œ, ë¬´ì—‡ì„ ë³€ê²½í–ˆëŠ”ì§€ ê¸°ë¡ |
| **ë¶„ìŸ í•´ê²°** | ë¶„ìŸ ë°œìƒ ì‹œ ì¦ê±° ìë£Œ |
| **ê°ì‚¬ ë¡œê·¸** | ê·œì • ì¤€ìˆ˜ìš© ê°ì‚¬ ì¶”ì  |

### 9.3 ê´€ë ¨ í•¨ìˆ˜

```typescript
// applicationHistoryService.ts
confirmApplicationWithHistory(applicationId, selectedAssignments, confirmerId)
createHistoryEntry(assignments, confirmerId)
addCancellationToEntry(entry, cancelReason, cancellerId)
findActiveConfirmation(confirmationHistory)
updateDateSpecificRequirementsFilled(jobPosting, assignments, delta)
```

---

## 10. ì •ì‚° ìºì‹± ì‹œìŠ¤í…œ (Settlement Breakdown)

### 10.1 ì •ì‚° êµ¬ì¡°

```typescript
interface SettlementBreakdown {
  // ê·¼ë¬´ ì‹œê°„
  hoursWorked: number;

  // ê¸°ë³¸ ê¸‰ì—¬
  salaryInfo: SalaryInfo;
  basePay: number;

  // ìˆ˜ë‹¹
  allowances?: {
    guaranteedHours?: number;     // ë³´ì¥ì‹œê°„
    meal?: number;                // ì‹ëŒ€
    transportation?: number;      // êµí†µë¹„
    accommodation?: number;       // ìˆ™ë°•ë¹„
  };
  allowancePay: number;

  // ì„¸ê¸ˆ
  taxAmount: number;

  // í•©ê³„
  totalPay: number;               // ì„¸ì „
  afterTaxPay: number;            // ì„¸í›„

  // ë©”íƒ€
  isEstimate: boolean;            // ì¶”ì •ì¹˜ ì—¬ë¶€
  calculatedAt: string;           // ê³„ì‚° ì‹œì 
}
```

### 10.2 ìºì‹± ì „ëµ

```
[ìŠ¤ì¼€ì¤„ íƒ­ ì§„ì…]
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  workLogToScheduleEvent() í˜¸ì¶œ      â”‚
â”‚                                     â”‚
â”‚  1. workLog ì¡°íšŒ                    â”‚
â”‚  2. jobPosting ê¸‰ì—¬ ì •ë³´ ì¡°íšŒ       â”‚
â”‚  3. calculateSettlementBreakdown()  â”‚
â”‚  4. ScheduleEventì— ìºì‹± ì €ì¥       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì •ì‚° íƒ­ì—ì„œ                         â”‚
â”‚                                     â”‚
â”‚  â†’ settlementBreakdown ì‚¬ìš© (ìºì‹±)  â”‚
â”‚  â†’ ì¤‘ë³µ ê³„ì‚° ë°©ì§€                   â”‚
â”‚  â†’ ì„±ëŠ¥ ìµœì í™”                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.3 ê°œë³„ ì˜¤ë²„ë¼ì´ë“œ

```typescript
interface ScheduleEvent {
  // ê¸°ë³¸ ì •ì‚° (ìºì‹±)
  settlementBreakdown?: SettlementBreakdown;

  // ê°œë³„ ì˜¤ë²„ë¼ì´ë“œ (íŠ¹ìˆ˜ ì¼€ì´ìŠ¤)
  customSalaryInfo?: SalaryInfo;
  customAllowances?: Allowances;
  customTaxSettings?: TaxSettings;
}
```

---

## 11. QR ì½”ë“œ ì‹œìŠ¤í…œ ìƒì„¸

### 11.1 QR ì½”ë“œ êµ¬ì¡°

```typescript
interface EventQRCode {
  eventId: string;                // jobPostingId
  date: string;                   // YYYY-MM-DD
  action: 'checkIn' | 'checkOut';
  securityCode: string;           // UUID (ë³´ì•ˆìš©)

  createdBy: string;              // ë°œê¸‰ì ID
  createdAt: Timestamp;
  expiresAt: Timestamp;           // 3ë¶„ í›„ ë§Œë£Œ
  isActive: boolean;

  scanCount: number;              // ìŠ¤ìº” íšŸìˆ˜
}

interface EventQRDisplayData {
  type: 'event';
  eventId: string;
  date: string;
  action: 'checkIn' | 'checkOut';
  securityCode: string;
  createdAt: number;              // ms
  expiresAt: number;              // ms
}
```

### 11.2 QR ìœ íš¨ ì‹œê°„

```typescript
const QR_VALIDITY_DURATION_MS = 3 * 60 * 1000;  // 3ë¶„ ìœ íš¨
const QR_REFRESH_INTERVAL_MS = 2 * 60 * 1000;   // 2ë¶„ë§ˆë‹¤ ìë™ ê°±ì‹ 
```

### 11.3 QR ë°œê¸‰/ê²€ì¦ í”Œë¡œìš°

```
[êµ¬ì¸ì]                              [ìŠ¤íƒœí”„]
    â”‚                                    â”‚
    â”‚  QR ë°œê¸‰ ìš”ì²­                       â”‚
    â”‚  â†’ deactivateExistingQRCodes()     â”‚
    â”‚  â†’ ìƒˆ QR ìƒì„± (3ë¶„ ìœ íš¨)            â”‚
    â”‚                                    â”‚
    â”‚  í™”ë©´ì— QR í‘œì‹œ                     â”‚
    â”‚  (2ë¶„ë§ˆë‹¤ ìë™ ê°±ì‹ )                 â”‚
    â”‚                                    â”‚
    â”‚                        QR ìŠ¤ìº”     â”‚
    â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                                    â”‚
    â”‚  ê²€ì¦:                              â”‚
    â”‚  1. securityCode ì¼ì¹˜              â”‚
    â”‚  2. expiresAt > now                â”‚
    â”‚  3. isActive = true                â”‚
    â”‚  4. date ì¼ì¹˜                      â”‚
    â”‚                                    â”‚
    â”‚  ì„±ê³µ ì‹œ:                           â”‚
    â”‚  â†’ workLogs ì—…ë°ì´íŠ¸                â”‚
    â”‚  â†’ scanCount += 1                  â”‚
```

### 11.4 ë‹¨ì¼ í™œì„± QR ì •ì±…

```typescript
// ê°™ì€ eventId/date/actionì— ëŒ€í•´ í•œ ë²ˆì— í•˜ë‚˜ì˜ í™œì„± QRë§Œ ìœ ì§€
async function deactivateExistingQRCodes(
  eventId: string,
  date: string,
  action: 'checkIn' | 'checkOut'
) {
  // ê¸°ì¡´ í™œì„± QR ëª¨ë‘ ë¹„í™œì„±í™”
  // isActive = false
}
```

---

## 12. íŠ¸ëœì­ì…˜ í•„ìˆ˜ ì—°ê²° ì§€ì 

### 12.1 ì§€ì› í™•ì • ì‹œ (4ê°œ ì»¬ë ‰ì…˜ ë™ì‹œ ìˆ˜ì •)

```typescript
runTransaction(async (tx) => {
  // 1. applications ì—…ë°ì´íŠ¸
  tx.update(applicationRef, {
    status: 'confirmed',
    confirmedAt: serverTimestamp(),
    originalApplication: { ... },      // ìµœì´ˆ í™•ì • ì‹œë§Œ
    confirmationHistory: arrayUnion(historyEntry)
  });

  // 2. jobPostings.filledPositions += 1
  tx.update(jobPostingRef, {
    filledPositions: increment(1)
  });

  // 3. dateSpecificRequirements.filled ì—…ë°ì´íŠ¸
  // updateDateSpecificRequirementsFilled()

  // 4. workLogs ìƒì„± (assignments[] ê¸°ë°˜)
  assignments.forEach(assignment => {
    tx.set(workLogRef, {
      applicationId,
      jobPostingId,
      staffId,
      date: assignment.date,
      status: 'scheduled'
    });
  });
});
```

### 12.2 ì§€ì› ê±°ì ˆ ì‹œ (ì •ì› ë³µêµ¬)

```typescript
runTransaction(async (tx) => {
  // 1. applications.status = 'rejected'
  tx.update(applicationRef, {
    status: 'rejected',
    rejectionReason,
    processedAt: serverTimestamp()
  });

  // 2. í™•ì •ëœ ìƒíƒœì˜€ë‹¤ë©´ filledPositions -= 1
  if (wasConfirmed) {
    tx.update(jobPostingRef, {
      filledPositions: increment(-1)
    });
  }
});
```

### 12.3 ì·¨ì†Œ ìš”ì²­ ìŠ¹ì¸ ì‹œ (3ê°œ ì»¬ë ‰ì…˜ ë™ì‹œ ìˆ˜ì •)

```typescript
runTransaction(async (tx) => {
  // 1. applications ì—…ë°ì´íŠ¸
  tx.update(applicationRef, {
    status: 'cancelled',
    'cancellationRequest.status': 'approved',
    'cancellationRequest.reviewedAt': serverTimestamp(),
    'cancellationRequest.reviewedBy': reviewerId
  });

  // 2. jobPostings.filledPositions -= 1
  tx.update(jobPostingRef, {
    filledPositions: increment(-1)
  });

  // 3. workLogs ì‚­ì œ
  workLogIds.forEach(id => {
    tx.delete(doc(db, 'workLogs', id));
  });
});
```

### 12.4 ëŒ€ê¸°ì ìŠ¹ê²© ì‹œ (4ê°œ ì»¬ë ‰ì…˜ ë™ì‹œ ìˆ˜ì •)

```typescript
runTransaction(async (tx) => {
  // 1. applications ì—…ë°ì´íŠ¸
  tx.update(applicationRef, {
    status: 'confirmed',
    waitlistPromotedAt: serverTimestamp(),
    confirmationHistory: arrayUnion(historyEntry)
  });

  // 2. jobPostings.filledPositions += 1
  tx.update(jobPostingRef, {
    filledPositions: increment(1)
  });

  // 3. dateSpecificRequirements.filled ì—…ë°ì´íŠ¸
  // updateDateSpecificRequirementsFilled()

  // 4. workLogs ìƒì„±
  assignments.forEach(assignment => {
    tx.set(workLogRef, { ... });
  });
});
```

### 12.5 QR ì²´í¬ì¸/ì•„ì›ƒ ì‹œ

```typescript
runTransaction(async (tx) => {
  // 1. QR ê²€ì¦
  const qrDoc = await tx.get(qrCodeRef);
  if (!isValidQR(qrDoc)) throw new Error('Invalid QR');

  // 2. workLogs ì—…ë°ì´íŠ¸
  tx.update(workLogRef, {
    actualStartTime: serverTimestamp(),  // ë˜ëŠ” actualEndTime
    status: 'checked_in'                  // ë˜ëŠ” 'checked_out'
  });

  // 3. eventQRCodes.scanCount += 1
  tx.update(qrCodeRef, {
    scanCount: increment(1)
  });
});
```

### 12.6 ì •ì‚° ì²˜ë¦¬ ì‹œ

```typescript
runTransaction(async (tx) => {
  // 1. workLogs.payrollStatus = 'completed'
  tx.update(workLogRef, {
    payrollStatus: 'completed',
    payrollAmount: settlementBreakdown.afterTaxPay,
    payrollDate: serverTimestamp()
  });

  // 2. notifications ìƒì„± (ì •ì‚°ì™„ë£Œ ì•Œë¦¼)
  tx.set(notificationRef, {
    userId: staffId,
    type: 'settlement_completed',
    data: { workLogId, amount: settlementBreakdown.afterTaxPay }
  });
});
```

---

## 13. ë°ì´í„° ìƒì„± ì‹œì 

| ì‹œì  | ìƒì„±ë˜ëŠ” ë°ì´í„° | íŠ¸ë¦¬ê±° | ê´€ë ¨ í”Œë¡œìš° |
|------|---------------|--------|------------|
| íšŒì›ê°€ì… | `users` | ì¸ì¦ ì™„ë£Œ | 1ï¸âƒ£ ì¸ì¦ |
| ê³µê³  ë“±ë¡ | `jobPostings` | êµ¬ì¸ì ìƒì„± | 4ï¸âƒ£ êµ¬ì¸ì |
| ì§€ì› | `applications` | ìŠ¤íƒœí”„ ì§€ì› | 2ï¸âƒ£ êµ¬ì¸êµ¬ì§ |
| ì§€ì› í™•ì • | `workLogs`, `originalApplication`, `confirmationHistory` | êµ¬ì¸ì í™•ì • | 4ï¸âƒ£ êµ¬ì¸ì |
| ëŒ€ê¸°ì ë“±ë¡ | `applications.waitlistOrder` | ì •ì› ì´ˆê³¼ ì‹œ | 4ï¸âƒ£ êµ¬ì¸ì |
| ëŒ€ê¸°ì ìŠ¹ê²© | `workLogs`, `waitlistPromotedAt` | ì •ì› í™•ë³´ ì‹œ | 4ï¸âƒ£ êµ¬ì¸ì |
| ì·¨ì†Œ ìš”ì²­ | `applications.cancellationRequest` | ìŠ¤íƒœí”„ ìš”ì²­ | 2ï¸âƒ£ êµ¬ì¸êµ¬ì§ |
| ì·¨ì†Œ ìŠ¹ì¸ | `workLogs` ì‚­ì œ | êµ¬ì¸ì ìŠ¹ì¸ | 4ï¸âƒ£ êµ¬ì¸ì |
| QR ë°œê¸‰ | `eventQRCodes` | êµ¬ì¸ì ë°œê¸‰ | 3ï¸âƒ£ ìŠ¤ì¼€ì¤„ |
| QR ìŠ¤ìº” | `workLogs` ì—…ë°ì´íŠ¸ | ìŠ¤íƒœí”„ ì²´í¬ì¸/ì•„ì›ƒ | 3ï¸âƒ£ ìŠ¤ì¼€ì¤„ |
| ìƒíƒœ ë³€ê²½ | `notifications` | ìë™ ìƒì„± | 5ï¸âƒ£ ì•Œë¦¼ |
| ì •ì‚° ì™„ë£Œ | `workLogs.payrollStatus`, `notifications` | êµ¬ì¸ì ì²˜ë¦¬ | 4ï¸âƒ£ êµ¬ì¸ì |

---

## 14. í•µì‹¬ ë°ì´í„° vs ë¯¸ì‚¬ìš© ë°ì´í„°

### 14.1 í•µì‹¬ ë°ì´í„° (ğŸ”´ í•„ìˆ˜)

| ì»¬ë ‰ì…˜ | í•µì‹¬ í•„ë“œ | ìš©ë„ |
|--------|----------|------|
| **users** | `uid`, `name`, `role`, `identity.ci`, `fcmToken` | ì‚¬ìš©ì ì‹ë³„, ê¶Œí•œ, ì¤‘ë³µê°€ì…ë°©ì§€, í‘¸ì‹œì•Œë¦¼ |
| **jobPostings** | `id`, `status`, `postingType`, `dateSpecificRequirements[]`, `roles[]`, `ownerId`, `fixedConfig`, `tournamentConfig` | ê³µê³  ì¡°íšŒ/í•„í„°/ê´€ë¦¬ |
| **applications** | `id`, `applicantId`, `jobPostingId`, `status`, `assignments[]`, `originalApplication`, `confirmationHistory[]`, `cancellationRequest`, `waitlistOrder` | ì§€ì› ìƒíƒœ ê´€ë¦¬, ì´ë ¥ ì¶”ì  |
| **workLogs** | `id`, `applicationId`, `staffId`, `jobPostingId`, `date`, `actualStartTime/EndTime`, `settlementBreakdown`, `payrollStatus` | ì¶œí‡´ê·¼ ê¸°ë¡, ì •ì‚° |
| **eventQRCodes** | `id`, `eventId`, `action`, `securityCode`, `expiresAt`, `isActive`, `generatedBy` | QR ì¶œí‡´ê·¼ |
| **notifications** | `id`, `userId`, `type`, `isRead`, `data` | ì•Œë¦¼ |

### 14.2 ë¯¸ì‚¬ìš©/ë ˆê±°ì‹œ ë°ì´í„° (âš«)

| í•„ë“œ/ì»¬ë ‰ì…˜ | ìœ„ì¹˜ | ì´ìœ  | ì œê±° ì˜ˆì • |
|------------|------|------|----------|
| `eventId` | applications | ë ˆê±°ì‹œ (â†’ `jobPostingId` ì‚¬ìš©) | 2025 Q3 |
| `postId` | applications | ë ˆê±°ì‹œ (â†’ `jobPostingId` ì‚¬ìš©) | 2025 Q3 |
| `workDate` (ë‹¨ì¼) | jobPostings | ë ˆê±°ì‹œ (â†’ `dateSpecificRequirements[]` ë°°ì—´) | 2025 Q3 |
| `timeSlot` (ë‹¨ì¼) | jobPostings | ë ˆê±°ì‹œ (â†’ ì‹œê°„ëŒ€ ë°°ì—´) | 2025 Q3 |
| `appliedRole` (ë‹¨ì¼) | applications | v1 í˜¸í™˜ì„± (â†’ `assignments[].roleIds`) | 2025 Q3 |
| `appliedDate` (ë‹¨ì¼) | applications | v1 í˜¸í™˜ì„± (â†’ `assignments[].dates`) | 2025 Q3 |
| `role` / `roles` | assignments | v2 í˜¸í™˜ì„± (â†’ `roleIds` í†µí•©) | 2025 Q2 |
| `staff` ì»¬ë ‰ì…˜ | Firestore | **ì™„ì „ ë¯¸ì‚¬ìš©** (ëª¨ë°”ì¼ì•±ì€ usersë§Œ ì‚¬ìš©) | - |
| `events` ì»¬ë ‰ì…˜ | Firestore | **ì™„ì „ ë¯¸ì‚¬ìš©** (â†’ jobPostingsë¡œ í†µí•©) | - |
| `tournaments` | ëª¨ë°”ì¼ì•± | Phase 2 ì´í›„ (í˜„ì¬ ë¯¸êµ¬í˜„) | - |

---

## 15. ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë§¤í•‘

### 15.1 í•µì‹¬ ì„œë¹„ìŠ¤

| ì„œë¹„ìŠ¤ íŒŒì¼ | ë‹´ë‹¹ ë°ì´í„° | ì£¼ìš” ê¸°ëŠ¥ |
|------------|-----------|----------|
| `authService.ts` | users | ë¡œê·¸ì¸, íšŒì›ê°€ì…, ì†Œì…œ ë¡œê·¸ì¸ |
| `jobService.ts` | jobPostings | ê³µê³  ëª©ë¡, ê²€ìƒ‰, í•„í„°, ìƒì„¸ |
| `applicationService.ts` | applications | ì§€ì›, ì·¨ì†Œ ìš”ì²­ |
| `applicantManagementService.ts` | applications | í™•ì •, ê±°ì ˆ, ëŒ€ê¸°ì, ì·¨ì†Œìš”ì²­ ê²€í†  |
| `applicationHistoryService.ts` | applications | ì´ë ¥ ì¶”ì , ê°ì‚¬ ë¡œê·¸ |
| `scheduleService.ts` | workLogs, applications | ìŠ¤ì¼€ì¤„ ì¡°íšŒ, ì •ì‚° ê³„ì‚° |
| `eventQRService.ts` | eventQRCodes, workLogs | QR ìƒì„±, ê²€ì¦, ì²´í¬ì¸/ì•„ì›ƒ |
| `settlementService.ts` | workLogs | ì •ì‚° ì²˜ë¦¬, ì¼ê´„ ì •ì‚° |
| `notificationService.ts` | notifications | ì•Œë¦¼ ì¡°íšŒ, ì½ìŒ ì²˜ë¦¬ |

### 15.2 ë³´ì¡° ì„œë¹„ìŠ¤

| ì„œë¹„ìŠ¤ íŒŒì¼ | ë‹´ë‹¹ ë°ì´í„° | ì£¼ìš” ê¸°ëŠ¥ |
|------------|-----------|----------|
| `jobManagementService.ts` | jobPostings | ê³µê³  CRUD (êµ¬ì¸ììš©) |
| `confirmedStaffService.ts` | applications, workLogs | í™•ì • ìŠ¤íƒœí”„ ê´€ë¦¬, ì‹œê°„ ìˆ˜ì • |
| `templateService.ts` | jobPostingTemplates | ê³µê³  í…œí”Œë¦¿ ì €ì¥/ë¡œë“œ |
| `applicantConversionService.ts` | applications, users | ì§€ì›ì â†’ ìŠ¤íƒœí”„ ë³€í™˜ |
| `storageService.ts` | Firebase Storage | í”„ë¡œí•„ ì´ë¯¸ì§€ ì—…ë¡œë“œ |
| `pushNotificationService.ts` | FCM | í‘¸ì‹œ ì•Œë¦¼ ë“±ë¡/ìˆ˜ì‹  |

---

## 16. í•µì‹¬ ì—°ê²° ì²´ì¸ ìš”ì•½

```
users.uid (ì¤‘ì‹¬ì¶•)
    â”‚
    â”œâ”€â”€â†’ jobPostings.ownerId (êµ¬ì¸ìë¡œì„œ)
    â”‚         â”‚
    â”‚         â”œâ”€â”€â†’ applications.jobPostingId (ê³µê³ ì— ëŒ€í•œ ì§€ì›)
    â”‚         â”‚         â”‚
    â”‚         â”‚         â”œâ”€â”€â†’ applications.cancellationRequest (ì·¨ì†Œ ìš”ì²­)
    â”‚         â”‚         â”œâ”€â”€â†’ applications.waitlistOrder (ëŒ€ê¸°ì ê´€ë¦¬)
    â”‚         â”‚         â”œâ”€â”€â†’ applications.confirmationHistory[] (ì´ë ¥ ì¶”ì )
    â”‚         â”‚         â”‚
    â”‚         â”‚         â””â”€â”€â†’ workLogs.applicationId (í™•ì •ëœ ì§€ì›ì˜ ê·¼ë¬´ê¸°ë¡)
    â”‚         â”‚                   â”‚
    â”‚         â”‚                   â””â”€â”€â†’ settlementBreakdown (ì •ì‚° ìºì‹±)
    â”‚         â”‚
    â”‚         â””â”€â”€â†’ eventQRCodes.eventId (QR ë°œê¸‰)
    â”‚
    â”œâ”€â”€â†’ applications.applicantId (ì§€ì›ìë¡œì„œ)
    â”‚
    â”œâ”€â”€â†’ workLogs.staffId (ê·¼ë¬´ìë¡œì„œ)
    â”‚
    â”œâ”€â”€â†’ eventQRCodes.generatedBy (QR ë°œê¸‰ìë¡œì„œ)
    â”‚
    â””â”€â”€â†’ notifications.userId (ì•Œë¦¼ ìˆ˜ì‹ ìë¡œì„œ)
```

**í•µì‹¬ í¬ì¸íŠ¸**:
- `users.uid`ê°€ ëª¨ë“  ë°ì´í„°ì˜ **ì¤‘ì‹¬ì¶•**
- `jobPostings.id`ê°€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì˜ **ì—°ê²° ê³ ë¦¬**
- `applications.id`ê°€ ì§€ì›-ê·¼ë¬´ ê°„ **ë¸Œë¦¿ì§€**
- `assignments[]`ê°€ ë‹¤ì¤‘ ì—­í• /ë‚ ì§œ/ì‹œê°„ **í†µí•© ê´€ë¦¬**

---

## 17. ìŠ¤íƒœí”„ vs êµ¬ì¸ì ë°ì´í„° ì ‘ê·¼ ë²”ìœ„

### ìŠ¤íƒœí”„ (staff)

```yaml
ì½ê¸° ê°€ëŠ¥:
  - jobPostings: ì „ì²´ (status = 'active')
  - applications: ë³¸ì¸ ê²ƒë§Œ (applicantId = uid)
  - workLogs: ë³¸ì¸ ê²ƒë§Œ (staffId = uid)
  - notifications: ë³¸ì¸ ê²ƒë§Œ (userId = uid)

ì“°ê¸° ê°€ëŠ¥:
  - applications: ìƒì„± (ì§€ì›), ì·¨ì†Œ ìš”ì²­
  - workLogs: QR ì²´í¬ì¸/ì•„ì›ƒë§Œ
```

### êµ¬ì¸ì (employer)

```yaml
ì½ê¸° ê°€ëŠ¥:
  - jobPostings: ë³¸ì¸ ê²ƒ (ownerId = uid)
  - applications: ë³¸ì¸ ê³µê³ ì— ëŒ€í•œ ê²ƒ (jobPostingId in myPostings)
  - workLogs: ë³¸ì¸ ê³µê³ ì— ëŒ€í•œ ê²ƒ (jobPostingId in myPostings)
  - notifications: ë³¸ì¸ ê²ƒë§Œ (userId = uid)

ì“°ê¸° ê°€ëŠ¥:
  - jobPostings: CRUD
  - applications: í™•ì •/ê±°ì ˆ/ëŒ€ê¸°ì ê´€ë¦¬/ì·¨ì†Œ ìš”ì²­ ê²€í† 
  - workLogs: ì •ì‚° ì²˜ë¦¬, ì‹œê°„ ìˆ˜ì •
  - eventQRCodes: ìƒì„±
```

### ê´€ë¦¬ì (admin)

```yaml
ì½ê¸° ê°€ëŠ¥:
  - ëª¨ë“  ì»¬ë ‰ì…˜

ì“°ê¸° ê°€ëŠ¥:
  - ëª¨ë“  ì»¬ë ‰ì…˜
  - tournamentConfig ìŠ¹ì¸
  - ì‚¬ìš©ì íŒ¨ë„í‹° ë¶€ì—¬
```

---

## 18. Timestamp í˜•ì‹ í˜¸í™˜ì„±

### 18.1 ë‹¤ì–‘í•œ í˜•ì‹ ì²˜ë¦¬

```typescript
// Firestoreì—ì„œ ë°˜í™˜ë˜ëŠ” ë‹¤ì–‘í•œ ë‚ ì§œ í˜•ì‹
type DateInput =
  | string                          // "2025-01-17"
  | Date                            // JavaScript Date
  | Timestamp                       // Firestore Timestamp
  | { seconds: number }             // ì§ë ¬í™”ëœ Timestamp
  | { toDate: () => Date };         // Timestamp ì¸í„°í˜ì´ìŠ¤

// ë³€í™˜ í•¨ìˆ˜
function parseDateInput(input: DateInput): string {
  if (typeof input === 'string') {
    return input;
  } else if (input instanceof Date) {
    return input.toISOString().split('T')[0];
  } else if ('toDate' in input && typeof input.toDate === 'function') {
    return input.toDate().toISOString().split('T')[0];
  } else if ('seconds' in input) {
    return new Date(input.seconds * 1000).toISOString().split('T')[0];
  }
  throw new Error('Invalid date input');
}
```

### 18.2 ì‚¬ìš© ìœ„ì¹˜

| í•„ë“œ | í˜•ì‹ | ì´ìœ  |
|------|------|------|
| `createdAt`, `updatedAt` | Timestamp | Firestore ì„œë²„ ì‹œê°„ |
| `assignment.dates[]` | string (YYYY-MM-DD) | ë°°ì—´ ë¹„êµ ìš©ì´ |
| `workLog.date` | string (YYYY-MM-DD) | ì¸ë±ì‹± ë° í•„í„°ë§ |
| `dateSpecificRequirements[].date` | string ë˜ëŠ” Timestamp | í˜¸í™˜ì„± ìœ ì§€ |

---

## 19. Hooks ë ˆì´ì–´ ë°ì´í„° ê´€ë¦¬

### 19.1 Hooks ê³„ì¸µ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UI Layer (Screens)                        â”‚
â”‚                         â†•                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Hooks Layer (42ê°œ í›…)                     â”‚
â”‚  â”œâ”€ UI ìƒíƒœ: useToast, useSettings, useMediaQuery           â”‚
â”‚  â”œâ”€ ì„œë²„ ë°ì´í„°: useJobPostings, useScheduleData            â”‚
â”‚  â”œâ”€ Firebase êµ¬ë…: useUnifiedData, useFirestoreQuery        â”‚
â”‚  â””â”€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§: useJobPostingForm, useTemplateManager    â”‚
â”‚                         â†•                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    State Layer                               â”‚
â”‚  â”œâ”€ Zustand Store (ì „ì—­ ìƒíƒœ) â† ì½ê¸°/ì“°ê¸°                    â”‚
â”‚  â”œâ”€ TanStack Query (ìºì‹±) â† ì½ê¸°                            â”‚
â”‚  â””â”€ React State (ë¡œì»¬ ìƒíƒœ) â† ì½ê¸°/ì“°ê¸°                      â”‚
â”‚                         â†•                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Service Layer                             â”‚
â”‚                         â†•                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Firebase Layer                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 19.2 ì£¼ìš” í›… ëª©ë¡

| í›… | ë‹´ë‹¹ ë°ì´í„° | ìš©ë„ |
|----|-----------|------|
| `useAuth` | users, authStore | ì¸ì¦ ìƒíƒœ ê´€ë¦¬ |
| `useJobPostings` | jobPostings | ê³µê³  ëª©ë¡/ê²€ìƒ‰ |
| `useJobPostingForm` | jobPostings, templates | ê³µê³  ìƒì„±/ìˆ˜ì • í¼ |
| `useScheduleData` | workLogs, applications | ìŠ¤ì¼€ì¤„ ì¡°íšŒ |
| `useUnifiedData` | staff, workLogs, applications | ì‹¤ì‹œê°„ í†µí•© ë°ì´í„° |
| `useTemplateManager` | jobPostingTemplates | í…œí”Œë¦¿ CRUD |
| `useAccountDeletion` | deletionRequests | ê³„ì • ì‚­ì œ ê´€ë¦¬ |
| `useEventQR` | eventQRCodes | QR ìƒì„±/ê²€ì¦ |
| `useToast` | toastStore | í† ìŠ¤íŠ¸ ì•Œë¦¼ |

---

## 20. ìƒíƒœ ê´€ë¦¬ (Zustand + TanStack Query)

### 20.1 Zustand Store êµ¬ì¡°

```typescript
// unifiedDataStore.ts
interface UnifiedDataStore {
  // ì»¬ë ‰ì…˜ ë°ì´í„°
  staff: Staff[];
  workLogs: WorkLog[];
  applications: Application[];
  attendanceRecords: AttendanceRecord[];
  jobPostings: JobPosting[];

  // ì¸ë±ìŠ¤ ë§µ (O(1) ì¡°íšŒ)
  workLogsByEventId: Map<string, WorkLog[]>;
  applicationsByApplicantId: Map<string, Application[]>;

  // êµ¬ë… ê´€ë¦¬
  subscriptions: Map<string, () => void>;

  // ì•¡ì…˜
  setStaff: (staff: Staff[]) => void;
  subscribeToCollection: (collection: string) => void;
  unsubscribeAll: () => void;
}
```

### 20.2 TanStack Query Keys ì¤‘ì•™ ê´€ë¦¬

```typescript
// queryKeys.ts
export const queryKeys = {
  jobPostings: {
    all: ['jobPostings'] as const,
    list: (filters: object) => ['jobPostings', 'list', filters] as const,
    detail: (id: string) => ['jobPostings', 'detail', id] as const,
    mine: () => ['jobPostings', 'mine'] as const,
  },
  applications: {
    all: ['applications'] as const,
    mine: () => ['applications', 'mine'] as const,
    byJob: (jobId: string) => ['applications', 'job', jobId] as const,
  },
  schedules: {
    all: ['schedules'] as const,
    byDate: (date: string) => ['schedules', 'date', date] as const,
  },
  notifications: {
    all: ['notifications'] as const,
    unread: () => ['notifications', 'unread'] as const,
  },
};
```

### 20.3 ìºì‹± ì •ì±… (5ë‹¨ê³„)

| ì •ì±… | staleTime | gcTime | ìš©ë„ | ì˜ˆì‹œ |
|------|-----------|--------|------|------|
| `realtime` | 0 | 5ë¶„ | ì‹¤ì‹œê°„ ë°ì´í„° | notifications |
| `frequent` | 2ë¶„ | 10ë¶„ | ìì£¼ ë³€ê²½ | jobPostings.list |
| `standard` | 5ë¶„ | 30ë¶„ | ë³´í†µ ë¹ˆë„ | jobPostings.detail |
| `stable` | 30ë¶„ | 1ì‹œê°„ | ë“œë¬¼ê²Œ ë³€ê²½ | settings, regions |
| `offlineFirst` | Infinity | Infinity | ì˜¤í”„ë¼ì¸ ìš°ì„  | mySchedule |

---

## 21. ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´

### 21.1 ì—ëŸ¬ ì½”ë“œ ì²´ê³„

```typescript
// ì—ëŸ¬ ì½”ë“œ ë¶„ë¥˜
E1xxx: ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬
  E1001: ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì‹¤íŒ¨
  E1002: ìš”ì²­ íƒ€ì„ì•„ì›ƒ
  E1003: ì„œë²„ ì‘ë‹µ ì—†ìŒ

E2xxx: ì¸ì¦ ì—ëŸ¬
  E2001: ë¡œê·¸ì¸ í•„ìš”
  E2002: í† í° ë§Œë£Œ
  E2003: ê¶Œí•œ ì—†ìŒ
  E2004: ê³„ì • ë¹„í™œì„±í™”

E3xxx: ê²€ì¦ ì—ëŸ¬
  E3001: í•„ìˆ˜ í•„ë“œ ëˆ„ë½
  E3002: í˜•ì‹ ì˜¤ë¥˜
  E3003: ê°’ ë²”ìœ„ ì´ˆê³¼

E4xxx: Firebase ì—ëŸ¬
  E4001: Firestore ì½ê¸° ì‹¤íŒ¨
  E4002: Firestore ì“°ê¸° ì‹¤íŒ¨
  E4003: Storage ì—…ë¡œë“œ ì‹¤íŒ¨

E5xxx: ë³´ì•ˆ ì—ëŸ¬
  E5001: XSS íƒì§€
  E5002: ë¹„ì •ìƒ ì ‘ê·¼

E6xxx: ë¹„ì¦ˆë‹ˆìŠ¤ ì—ëŸ¬
  E6001: ì •ì› ë§ˆê°
  E6002: ì¤‘ë³µ ì§€ì›
  E6003: ì·¨ì†Œ ë¶ˆê°€ ìƒíƒœ
  E6004: ì”ì•¡ ë¶€ì¡±

E7xxx: ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬
  E7001: ì˜ˆìƒì¹˜ ëª»í•œ ì˜¤ë¥˜
```

### 21.2 ì—ëŸ¬ ì „íŒŒ í”Œë¡œìš°

```
Service Layer
    â”‚ throw ServiceError / ValidationError / AuthError
    â–¼
Hooks Layer
    â”‚ try/catch â†’ ì—ëŸ¬ ë¡œê¹… + ìƒíƒœ ì—…ë°ì´íŠ¸
    â–¼
UI Layer
    â”‚ error ìƒíƒœ í™•ì¸ â†’ Toast í‘œì‹œ ë˜ëŠ” ErrorBoundary
    â–¼
ì‚¬ìš©ì
```

### 21.3 ì¬ì‹œë„ ì •ì±…

```typescript
const retryConfig = {
  maxRetries: 3,
  baseDelay: 1000,          // 1ì´ˆ
  maxDelay: 30000,          // 30ì´ˆ
  backoffMultiplier: 2,     // ì§€ìˆ˜ ë°±ì˜¤í”„
  retryableErrors: ['E1001', 'E1002', 'E4001', 'E4002'],
};
```

---

## 22. ì»¤ìŠ¤í…€ ì—­í•  (customRole) ì²˜ë¦¬

### 22.1 ì—­í•  íƒ€ì… êµ¬ì¡°

```typescript
// ê¸°ì¡´ ì—­í•  ëª©ë¡
const PREDEFINED_ROLES = [
  'dealer', 'floor', 'serving', 'chip_runner',
  'cashier', 'supervisor', 'security', 'other'
];

// ì—­í• ë³„ ê¸‰ì—¬ ì„¤ì •
interface RoleSalary {
  salaryType: SalaryType;
  salaryAmount: string;
  customRoleName?: string;  // 'other' ì„ íƒ ì‹œì—ë§Œ ì‚¬ìš©
}
```

### 22.2 ì»¤ìŠ¤í…€ ì—­í•  í”Œë¡œìš°

```
[ê³µê³  ìƒì„±]
    â”‚
    â”œâ”€ ì—­í•  ë“œë¡­ë‹¤ìš´ì—ì„œ 'other' ì„ íƒ
    â”‚
    â”œâ”€ customRoleName ì…ë ¥ í•„ë“œ í™œì„±í™”
    â”‚
    â”œâ”€ handleCustomRoleNameChange(role, customName)
    â”‚  â””â”€ formData.roleSalaries.other.customRoleName = customName
    â”‚
    â””â”€ Firebase ì €ì¥:
       jobPostings/{id}.roleSalaries: {
         other: {
           salaryType: 'hourly',
           salaryAmount: '15000',
           customRoleName: 'ë¦¬ì…‰ì…˜'
         }
       }

[ì§€ì› ì‹œ]
    â”‚
    â”œâ”€ ì—­í•  ëª©ë¡ì— customRoleName í‘œì‹œ
    â”‚  â””â”€ "ê¸°íƒ€ (ë¦¬ì…‰ì…˜)"
    â”‚
    â””â”€ applications/{id}.appliedRole = 'other'
       applications/{id}.customRole = 'ë¦¬ì…‰ì…˜'
```

---

## 23. ì‚¬ì „ì§ˆë¬¸ (preQuestions) ì‹œìŠ¤í…œ

### 23.1 ì‚¬ì „ì§ˆë¬¸ íƒ€ì…

```typescript
interface PreQuestion {
  id: string;
  question: string;
  required: boolean;
  type: 'text' | 'textarea' | 'select';
  options?: string[];  // select íƒ€ì…ì¼ ë•Œë§Œ
}

interface PreQuestionAnswer {
  questionId: string;
  question?: string;
  answer: string;
  required?: boolean;
}
```

### 23.2 ì‚¬ì „ì§ˆë¬¸ ë°ì´í„° í”Œë¡œìš°

```
[ê³µê³  ìƒì„± ì‹œ]
    â”‚
    â”œâ”€ handlePreQuestionsToggle(enabled)
    â”‚  â””â”€ formData.usePreQuestions = true
    â”‚
    â”œâ”€ addPreQuestion()
    â”‚  â””â”€ ìƒˆ ì§ˆë¬¸ ì¶”ê°€ (ê¸°ë³¸: text íƒ€ì…, ì„ íƒì‚¬í•­)
    â”‚
    â”œâ”€ handlePreQuestionChange(index, field, value)
    â”‚  â””â”€ ì§ˆë¬¸ ë‚´ìš©, í•„ìˆ˜ ì—¬ë¶€, íƒ€ì… ìˆ˜ì •
    â”‚
    â”œâ”€ handlePreQuestionOptionChange(qIndex, oIndex, value)
    â”‚  â””â”€ select íƒ€ì… ì˜µì…˜ ìˆ˜ì •
    â”‚
    â””â”€ Firebase ì €ì¥:
       jobPostings/{id}.preQuestions: [
         { id: 'q1', question: 'ê²½ë ¥ì€?', type: 'text', required: true },
         { id: 'q2', question: 'ì„ í˜¸ ì‹œê°„?', type: 'select', options: ['ì˜¤ì „', 'ì˜¤í›„'] }
       ]

[ì§€ì› ì‹œ]
    â”‚
    â”œâ”€ ê³µê³  ìƒì„¸ì—ì„œ preQuestions ë¡œë“œ
    â”‚
    â”œâ”€ ê° ì§ˆë¬¸ë³„ ë‹µë³€ UI ë Œë”ë§
    â”‚  â”œâ”€ text/textarea: í…ìŠ¤íŠ¸ ì…ë ¥
    â”‚  â””â”€ select: ì˜µì…˜ ë“œë¡­ë‹¤ìš´
    â”‚
    â””â”€ Firebase ì €ì¥:
       applications/{id}.preQuestionAnswers: [
         { questionId: 'q1', answer: '3ë…„', required: true },
         { questionId: 'q2', answer: 'ì˜¤í›„' }
       ]

[ì§€ì›ì ê´€ë¦¬ ì‹œ]
    â”‚
    â””â”€ êµ¬ì¸ì í˜ì´ì§€ì—ì„œ preQuestionAnswers í‘œì‹œ
       â””â”€ PreQuestionDisplay ì»´í¬ë„ŒíŠ¸
```

---

## 24. ê³µê³  í…œí”Œë¦¿ (templates) ì‹œìŠ¤í…œ

### 24.1 í…œí”Œë¦¿ êµ¬ì¡°

```typescript
interface JobPostingTemplate {
  id: string;
  name: string;
  description: string;
  templateData: {
    title: string;
    type: PostingType;
    description: string;
    location: string;
    district: string;
    salaryType: SalaryType;
    salaryAmount: string;
    benefits: string[];
    preQuestions: PreQuestion[];
    roleSalaries: Record<string, RoleSalary>;
    // ì œì™¸: dateSpecificRequirements (ë‚ ì§œë³„ ë³€ê²½ í•„ìš”)
  };
  createdBy: string;
  createdAt: Timestamp;
  usageCount: number;
  lastUsedAt?: Timestamp;
}
```

### 24.2 í…œí”Œë¦¿ ë°ì´í„° í”Œë¡œìš°

```
[í…œí”Œë¦¿ ì €ì¥]
    â”‚
    â”œâ”€ ê³µê³  ì‘ì„± í¼ â†’ [í…œí”Œë¦¿ìœ¼ë¡œ ì €ì¥] ë²„íŠ¼
    â”‚
    â”œâ”€ openTemplateModal()
    â”‚  â””â”€ í…œí”Œë¦¿ ì´ë¦„/ì„¤ëª… ì…ë ¥ ëª¨ë‹¬
    â”‚
    â”œâ”€ handleSaveTemplate(formData)
    â”‚  â”œâ”€ Validation: í…œí”Œë¦¿ëª… í•„ìˆ˜
    â”‚  â”œâ”€ dateSpecificRequirements ì œì™¸ (ë‚ ì§œ ì œì™¸)
    â”‚  â””â”€ Firebase: jobPostingTemplates/{id} ì €ì¥
    â”‚
    â””â”€ toast: 'í…œí”Œë¦¿ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤'

[í…œí”Œë¦¿ ë¡œë“œ]
    â”‚
    â”œâ”€ ê³µê³  ì‘ì„± í˜ì´ì§€ â†’ [í…œí”Œë¦¿ ë¡œë“œ] ë²„íŠ¼
    â”‚
    â”œâ”€ openLoadTemplateModal()
    â”‚  â””â”€ ì €ì¥ëœ í…œí”Œë¦¿ ëª©ë¡ í‘œì‹œ
    â”‚
    â”œâ”€ handleLoadTemplate(template)
    â”‚  â”œâ”€ usageCount += 1
    â”‚  â”œâ”€ lastUsedAt = now
    â”‚  â”œâ”€ templateToFormData ë³€í™˜
    â”‚  â””â”€ formData ë³µì›
    â”‚
    â””â”€ í¼ì´ í…œí”Œë¦¿ ë°ì´í„°ë¡œ ì±„ì›Œì§

[í…œí”Œë¦¿ ì‚­ì œ]
    â”‚
    â”œâ”€ í…œí”Œë¦¿ ëª©ë¡ â†’ [ì‚­ì œ] ì•„ì´ì½˜
    â”‚
    â”œâ”€ handleDeleteTemplateConfirm()
    â”‚  â””â”€ Firebase: jobPostingTemplates/{id} ì‚­ì œ
    â”‚
    â””â”€ ëª©ë¡ì—ì„œ ì œê±°
```

---

## 25. ì‹ ê³  ì‹œìŠ¤í…œ (reports)

### 25.1 ì‹ ê³  íƒ€ì…

```typescript
// ì‹ ê³  ìœ í˜• - ìŠ¤íƒœí”„ê°€ êµ¬ì¸ìë¥¼ ì‹ ê³ 
const EMPLOYER_REPORT_TYPES = {
  false_posting: 'í—ˆìœ„ ê³µê³ ',
  employer_negligence: 'êµ¬ì¸ì íƒœë§Œ',
  unfair_treatment: 'ë¶€ë‹¹ ëŒ€ìš°',
  inappropriate_behavior: 'ë¶€ì ì ˆí•œ í–‰ë™',
  other: 'ê¸°íƒ€'
};

// ì‹ ê³  ìœ í˜• - êµ¬ì¸ìê°€ ìŠ¤íƒœí”„ë¥¼ ì‹ ê³ 
const EMPLOYEE_REPORT_TYPES = {
  tardiness: 'ì§€ê°',
  negligence: 'íƒœë§Œ',
  no_show: 'ë¬´ë‹¨ ë¶ˆì°¸',
  inappropriate_behavior: 'ë¶€ì ì ˆí•œ í–‰ë™',
  other: 'ê¸°íƒ€'
};

interface Report {
  id: string;
  type: ReportType;
  reporterType: 'employee' | 'employer';
  reporterId: string;
  reporterName: string;
  targetId: string;
  targetName: string;
  eventId: string;
  eventTitle: string;
  date: string;
  description: string;
  status: 'pending' | 'reviewed' | 'resolved' | 'dismissed';
  createdAt: Timestamp;
  resolvedAt?: Timestamp;
  resolution?: string;
  adminNotes?: string;
}
```

### 25.2 ì‹ ê³  ë°ì´í„° í”Œë¡œìš°

```
[ì‹ ê³  ìƒì„±]
    â”‚
    â”œâ”€ ìŠ¤ì¼€ì¤„ â†’ ì´ë²¤íŠ¸ ì¹´ë“œ â†’ [ì‹ ê³ ] ë²„íŠ¼
    â”‚
    â”œâ”€ ReportModal ì—´ê¸°
    â”‚  â”œâ”€ reporterType ìë™ ê²°ì • (ìŠ¤íƒœí”„/êµ¬ì¸ì)
    â”‚  â”œâ”€ ì‹ ê³  ìœ í˜• ì„ íƒ
    â”‚  â””â”€ ìƒì„¸ ì„¤ëª… ì…ë ¥ (í•„ìˆ˜, 10ì ì´ìƒ)
    â”‚
    â”œâ”€ handleSubmit()
    â”‚  â”œâ”€ Validation
    â”‚  â””â”€ Firebase: reports/{id} ì €ì¥ (ë˜ëŠ” inquiries)
    â”‚
    â””â”€ toast: 'ì‹ ê³ ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤'

[ì‹ ê³  ê´€ë¦¬ - ê´€ë¦¬ì]
    â”‚
    â”œâ”€ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ â†’ ì‹ ê³  ëª©ë¡
    â”‚
    â”œâ”€ status = 'pending' ìš°ì„  í‘œì‹œ
    â”‚
    â”œâ”€ ì‹ ê³  ìƒì„¸ ì¡°íšŒ ë° ê²€í† 
    â”‚
    â””â”€ ìƒíƒœ ì—…ë°ì´íŠ¸:
       'pending' â†’ 'reviewed' â†’ 'resolved' / 'dismissed'
```

---

## 26. ê³„ì • ì‚­ì œ (account deletion)

### 26.1 ì‚­ì œ ìš”ì²­ êµ¬ì¡°

```typescript
interface DeletionRequest {
  requestId: string;
  userId: string;
  userEmail: string;
  userName: string;
  reason?: string;
  reasonCategory?: DeletionReasonCategory;
  requestedAt: Timestamp;
  scheduledDeletionAt: Timestamp;  // 30ì¼ í›„
  status: 'pending' | 'cancelled' | 'completed';
  cancelledAt?: Timestamp;
  completedAt?: Timestamp;
  verificationToken: string;
  ipAddress?: string;
}

type DeletionReasonCategory =
  | 'not_useful'
  | 'privacy_concerns'
  | 'switching_service'
  | 'too_many_emails'
  | 'difficult_to_use'
  | 'other';
```

### 26.2 ê³„ì • ì‚­ì œ ë°ì´í„° í”Œë¡œìš°

```
[ì‚­ì œ ìš”ì²­]
    â”‚
    â”œâ”€ ê³„ì • ì„¤ì • â†’ [ê³„ì • ì‚­ì œ] ì„¹ì…˜
    â”‚
    â”œâ”€ í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ (ë³¸ì¸ í™•ì¸)
    â”‚
    â”œâ”€ íƒˆí‡´ ì‚¬ìœ  ì„ íƒ (ì„ íƒì‚¬í•­)
    â”‚
    â”œâ”€ requestAccountDeletion(input)
    â”‚  â”œâ”€ reauthenticateWithCredential ë³¸ì¸ í™•ì¸
    â”‚  â”œâ”€ ì˜ˆì • ì‚­ì œì¼ = now + 30ì¼
    â”‚  â”œâ”€ verificationToken ìƒì„±
    â”‚  â”œâ”€ Firebase: deletionRequests/{id} ì €ì¥
    â”‚  â””â”€ Auth displayNameì— [DELETION_PENDING] ë§ˆí¬
    â”‚
    â””â”€ toast: '30ì¼ í›„ ì™„ì „íˆ ì‚­ì œë©ë‹ˆë‹¤'

[ì‚­ì œ ì·¨ì†Œ]
    â”‚
    â”œâ”€ ê³„ì • ì„¤ì • â†’ [ì‚­ì œ ì·¨ì†Œ] ë²„íŠ¼
    â”‚
    â”œâ”€ cancelDeletionRequest(requestId)
    â”‚  â”œâ”€ status: 'pending' â†’ 'cancelled'
    â”‚  â”œâ”€ cancelledAt ê¸°ë¡
    â”‚  â””â”€ displayNameì—ì„œ [DELETION_PENDING] ì œê±°
    â”‚
    â””â”€ toast: 'ì‚­ì œ ìš”ì²­ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤'

[ìë™ ì‚­ì œ - Cloud Function]
    â”‚
    â”œâ”€ ë§¤ì¼ ìì • ì‹¤í–‰
    â”‚
    â”œâ”€ scheduledDeletionAt <= nowì¸ pending ìš”ì²­ ì¡°íšŒ
    â”‚
    â”œâ”€ completeAccountDeletion()
    â”‚  â”œâ”€ Firestore users/{userId} ì‚­ì œ
    â”‚  â”œâ”€ ì„œë¸Œì»¬ë ‰ì…˜ ì‚­ì œ:
    â”‚  â”‚  consents, securitySettings, tournaments,
    â”‚  â”‚  myApplications, myWorkSessions, settings
    â”‚  â”œâ”€ status: 'completed'
    â”‚  â””â”€ completedAt ê¸°ë¡
    â”‚
    â””â”€ Firebase Auth ê³„ì • ì‚­ì œ
```

### 26.3 useAccountDeletion Hook

```typescript
const {
  deletionRequest,     // í˜„ì¬ ì‚­ì œ ìš”ì²­
  loading,             // ë¡œë”© ìƒíƒœ
  error,               // ì—ëŸ¬
  isPending,           // ì‚­ì œ ìš”ì²­ ëŒ€ê¸° ì¤‘ ì—¬ë¶€
  remainingDays,       // ë‚¨ì€ ì¼ìˆ˜
  scheduledDate,       // ì˜ˆì • ì‚­ì œì¼
  requestDeletion,     // ìš”ì²­ í•¨ìˆ˜
  cancelDeletion,      // ì·¨ì†Œ í•¨ìˆ˜
} = useAccountDeletion();
```

---

## 27. ê´€ë ¨ ë¬¸ì„œ

- [01-architecture.md](./01-architecture.md) - ì•„í‚¤í…ì²˜ ì„¤ê³„
- [DATA_SCHEMA.md](../../docs/reference/DATA_SCHEMA.md) - Firestore ìŠ¤í‚¤ë§ˆ ìƒì„¸
- [09-error-handling.md](./09-error-handling.md) - ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ
- [12-security.md](./12-security.md) - ë³´ì•ˆ ì„¤ê³„
- [05-components.md](./05-components.md) - ì»´í¬ë„ŒíŠ¸ ì‹œìŠ¤í…œ
- [22-migration-mapping.md](./22-migration-mapping.md) - ì½”ë“œ ë³€í™˜ ê°€ì´ë“œ

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-01-17*
